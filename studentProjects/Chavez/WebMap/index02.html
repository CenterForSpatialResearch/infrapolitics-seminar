<html>
<head>
	<title>Mapping Narrative</title>

	<link rel="stylesheet"  href="css/leaflet.css"/>

	<script src="js/leaflet.js"></script>

	<script src="js/jquery-3.2.1.min.js">  </script>

	<style>
	#map{position:absolute; top:0; bottom:0; left:0; width: 100%;}
	</style>


</head>
<body>
	<div id="map"></div>

	<script>
//initializing the map
	// var map = L.map('map', {
	// 	center: [15.02, 74.340],
	// 	zoom: 8,
	// 	maxZoom: 16,
	// 	minZoom: 7,
	// 	maxBounds:[[15,70],[25,77]]
	// });

	var map = L.map('map').setView([18.5224957, 73.8753419], 12.3);



//add background tile layers
	L.tileLayer('http://tile.stamen.com/toner-lite/{z}/{x}/{y}.png',
		{
			attribution: 'Tiles from <a href="http://www.openstreetmap.org/">OSM by Stamen Design</a>',
		maxZoom: 20,
		minZoom: 1
		}).addTo(map);

//define new marker
var myIcon = L.icon({
iconUrl: 'css/images/position-mark.png',
  iconSize: [25, 25],
  popupAnchor: [0, -28],
});

// var myIconTeal = L.icon({
// iconUrl: 'css/images/position-mark.png',
//   iconSize: [25, 25],
//   popupAnchor: [0, -28]
// });


//load GeoJSON file containing sites, and style points 2005
$.getJSON('data/Chavez.geojson',function(data){
	    	L.geoJson(data, {
	    	pointToLayer: function(feature, latlng) {
		return L.marker(latlng, {
		icon: myIcon});
	},
	    	onEachFeature: onEachFeature,
	    	}).addTo(map);
	    });

//define popup content for site annotations
function onEachFeature(feature, layer) {
	// does this feature have a property named popupContent?
	if (feature.properties.Text) {
		if (feature.properties.image){
			layer.bindPopup('<h1>'+feature.properties.Title+'</h1><p>' + feature.properties.Text + '</p><img src=' + feature.properties.image + ' style="max-width: 200px;">');
		}
		else {
			layer.bindPopup('<h1>'+feature.properties.Title+'</h1><p>' + feature.properties.Text + '</p>');
		}
	}
}


	</script>
</body>
</html>
